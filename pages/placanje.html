<!DOCTYPE html>
<html lang="hr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Plaćanje | Fast Food</title>
  <link rel="stylesheet" href="../css/placanje_style.css">
  <script defer src="../js/cart.js"></script>
</head>
<body>
  <header>
    <h1>Plaćanje</h1>
    <nav>
      <a href="index.html">Početna</a>
      <a href="menu.html">Meni</a>
      <a href="cart.html">Košarica</a>
    </nav>
  </header>

  <main>
    <section class="category">
      <h2>Unesite podatke za plaćanje</h2>
      
      <!-- Forma za unos podataka o kartici -->
      <form action="#" method="POST" id="payment-form">
        
        <div class="form-group card-icons">
          <!-- Ikone kartica, sada obje stoje lijevo, jedna pored druge -->
          <img src="../images/visa.jpg" alt="Visa" class="card-icon">
          <img src="../images/mastercard.jpg" alt="MasterCard" class="card-icon">
        </div>

        <div class="form-group">
          <label for="card-number">Broj kartice:</label>
          <input type="text" id="card-number" name="card-number" placeholder="1234 5678 9876 5432" required maxlength="19" pattern="^[0-9]{16,19}$" title="Broj kartice mora sadržavati samo brojeve (16-19 cifara)">
          <div class="error-message" id="card-number-error">Broj kartice mora sadržavati samo brojeve (16-19 znamenki).</div>
        </div>
        
        <div class="form-group">
          <label for="expiry-date">Datum isteka:</label>
          <input type="month" id="expiry-date" name="expiry-date" required min="2025-01">
          <div class="error-message" id="expiry-date-error">Datum isteka mora biti najranije 01/2025.</div>
        </div>
        
        <div class="form-group">
          <label for="ccv">CCV:</label>
          <input type="text" id="ccv" name="ccv" placeholder="123" required maxlength="3" pattern="^[0-9]{3}$" title="CCV mora biti broj s 3 znamenke">
          <div class="error-message" id="ccv-error">CCV mora biti troznamenkasti broj.</div>
        </div>
        
        <div class="form-group">
          <label for="name">Ime i Prezime:</label>
          <input type="text" id="name" name="name" placeholder="John Doe" required pattern="^[A-Za-z\s]+$" title="Ime i prezime smije sadržavati samo slova i razmake">
          <div class="error-message" id="name-error">Ime i prezime smije sadržavati samo slova i razmake.</div>
        </div>

        <!-- Dugme za praćenje narudžbe koje vodi na 'pracenje.html' -->
        <button type="submit" id="track-order-btn" class="pay-btn">Završite Plaćanje</button>
      </form>
    </section>
  </main>

  <script>
    // Funkcija za zatvaranje modalnog prozora
    function closeUserInfo() {
      document.getElementById("user-info").style.display = "none";
    }

    // Validacija forme za plaćanje
    const paymentForm = document.getElementById("payment-form");
    paymentForm.addEventListener("submit", function (event) {
      let isValid = true;

      // Provjera broja kartice
      const cardNumberInput = document.getElementById("card-number");
      if (!cardNumberInput.value.match(/^[0-9]{16,19}$/)) {
        cardNumberInput.classList.add("invalid");
        document.getElementById("card-number-error").style.display = "block";
        isValid = false;
      } else {
        cardNumberInput.classList.remove("invalid");
        document.getElementById("card-number-error").style.display = "none";
      }

      // Provjera datuma isteka
      const expiryDateInput = document.getElementById("expiry-date");
      const currentDate = new Date();
      const expiryDate = new Date(expiryDateInput.value);
      if (expiryDate < currentDate) {
        expiryDateInput.classList.add("invalid");
        document.getElementById("expiry-date-error").style.display = "block";
        isValid = false;
      } else {
        expiryDateInput.classList.remove("invalid");
        document.getElementById("expiry-date-error").style.display = "none";
      }

      // Provjera CCV-a
      const ccvInput = document.getElementById("ccv");
      if (!ccvInput.value.match(/^[0-9]{3}$/)) {
        ccvInput.classList.add("invalid");
        document.getElementById("ccv-error").style.display = "block";
        isValid = false;
      } else {
        ccvInput.classList.remove("invalid");
        document.getElementById("ccv-error").style.display = "none";
      }

      // Provjera imena i prezimena
      const nameInput = document.getElementById("name");
      if (!nameInput.value.match(/^[A-Za-z\s]+$/)) {
        nameInput.classList.add("invalid");
        document.getElementById("name-error").style.display = "block";
        isValid = false;
      } else {
        nameInput.classList.remove("invalid");
        document.getElementById("name-error").style.display = "none";
      }

      // Ako validacija ne uspije, zaustavi slanje forme
      if (!isValid) {
        event.preventDefault();
      } else {
        // Ako je sve ispravno, preusmjeri na pracenje.html
        event.preventDefault(); // Spriječiti defaultno ponašanje forme
        window.location.href = "pracenje.html";
      }
    });
  </script>
</body>
</html>


